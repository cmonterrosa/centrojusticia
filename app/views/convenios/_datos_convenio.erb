<%=javascript_include_tag "validations/jquery_validate.js"%>
<%=javascript_include_tag "fancybox/jquery-1.8.0.min"%>
<%= javascript_include_tag :defaults %>

<script type="text/javascript">
$(function() {
    $j('#convenio_fechahora').datetimepicker({
        dayOfWeekStart : 1,
        lang:'es'
    });
});
</script>

 <!-- Si viene de la busqueda -->
 <%if params[:expediente_num_expediente]%>
      <p><h4 style='color:green;'>Expediente: <%=@tramite.numero_expediente%> encontrado correctamente</h4></p>
 <%end%>

<!-- Número de expediente -->
     <div class="grid-12-12">
        <label style=" font-weight: bold;">Asunto: </label>
         <div class="grid-12-12">
          <%=h (@tramite.comparecencia) ? @tramite.comparecencia.asunto : '--'%>
         </div>
     </div>

    <!-- Sesiones del trámite -->
     <div class="grid-10-12">
        <label style=" font-weight: bold;">Sesiones: </label>
         <%@sesiones = Sesion.find(:all, :conditions => ["tramite_id = ? AND (cancel IS NULL or cancel=0)", @tramite.id])%>
        <%if @sesiones && !@sesiones.empty?%>
            <%@sesiones.each do |s|%>
                <div class="grid-12-12">
                    <%=h s.fechahora_completa%> / <%=h s.descripcion_especialistas%>
                </div>
            <%end%>
        <%end%>
         
     </div>


     <!-- Número de expediente -->
     <div class="grid-2-12">
        <label style=" font-weight: bold;">Número de expediente: </label>
         <div class="grid-12-12">
          <%=h @tramite.numero_expediente%>
         </div>
     </div>


<div class="grid-12-12">
     <fieldset>
       <legend><label style="font-size: 14px;">DATOS&nbsp;DEL&nbsp;CONVENIO</label></legend>
   <!-- primera linea -->
     <div class="grid-8-12">
        <label style=" font-weight: bold;">Fecha/hora de la firma: <em class="formee-req">*</em></label>
         <div class="grid-12-12">
            <span class="datetime">
                  <%=datetime_select :convenio, :fechahora, :value => @fecha%>
            </span>
         </div>
      </div>


     <!-- segunda linea -->
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Tipo de acuerdo: </label>
        <div class="grid-12-12">
          <%= text_field  :convenio, :tipo_acuerdo, :onBlur=>"javascript:{this.value = this.value.toUpperCase(); }",  :size => 24%>
        </div>
     </div>


     <!-- tercera linea -->
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Plazo: </label>
        <div class="grid-12-12">
          <%= text_field  :convenio, :plazo, :onBlur=>"javascript:{this.value = this.value.toUpperCase(); }",  :size => 24%>
        </div>
     </div>


     <!-- cuarta linea -->
      <div class="grid-4-12">
        <label style=" font-weight: bold;">Cantidad monetaria ($): </label>
        <div class="grid-12-12">
          <%= text_field  :convenio, :cantidad_monetaria, :onBlur=>"javascript:{this.value = this.value.toUpperCase(); }",  :size => 24%>
        </div>
     </div>

      <!-- quinta linea -->
      <div class="grid-12-12">
        <label style=" font-weight: bold;">Descripción: <em class="formee-req">*</em></label>
        <div class="grid-12-12">
          <%= text_area  :convenio, :descripcion, :onBlur=>"javascript:{this.value = this.value.toUpperCase(); }", :size => 24%>
        </div>
     </div>


      <!-- sexta linea -->
      <div class="grid-12-12">
        <label style=" font-weight: bold;">Observaciones:</label>
         <div class="grid-12-12">
            <%= text_area  :convenio, :observaciones, :onBlur=>"javascript:{this.value = this.value.toUpperCase(); }", :size => 24%>
         </div>
      </div>

      <div class="grid-12-12 clear"></div>

     </fieldset>
</div>
       <script type="text/javascript">
  var fechahora = new LiveValidation( 'convenio_fechahora' );
  var descripcion = new LiveValidation( 'convenio_fechahora' );
  var observaciones = new LiveValidation( 'convenio_observaciones' );
  fechahora.add( Validate.Presence );
  descripcion.add( Validate.Presence );
  observaciones.add( Validate.Length, { maximum: 255 } );
 </script>