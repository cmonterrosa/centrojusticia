<h3>Calificación de trámite</h3>


<script type="text/javascript">

  window.onload = function() {
    inicializar();
  }

  function inicializar(){
    if (document.getElementById("tramite_procedente").checked)
           {
             // Tramite procedente
             <%#*document.getElementById("tramite_noprocedente_id").disabled = true;%>
             <%#*document.getElementById("tramite_objeto_solicitud").disabled = false;%>
             <%#*document.getElementById("tramite_observaciones_generales").disabled = false;%>
             <%#*document.getElementById("tramite_documentacion_anexa").disabled = false;%>
             <%#*document.getElementById("tramite_materia_id").disabled = false;%>
             <%#*spinner = document.getElementById("spinner");%>
             <%#*spinner.style.display = "none";%>
           }
          else

            {
             // Tramite no procedente
             <%#*document.getElementById("tramite_noprocedente_id").disabled = false;%>
             <%#*document.getElementById("tramite_objeto_solicitud").disabled = true;%>
             <%#*document.getElementById("tramite_observaciones_generales").disabled = true;%>
             <%#*document.getElementById("tramite_documentacion_anexa").disabled = true;%>
             <%#*document.getElementById("tramite_materia_id").disabled = true;%>
             <%#*spinner = document.getElementById("spinner");%>
             <%#*spinner.style.display = "none";%>
            }

   }

  function alertaChecked(){
      if (document.getElementById("tramite_procedente").checked)
           {
             // Tramite procedente
             document.getElementById("tramite_noprocedente_id").disabled = true;
             <%#*document.getElementById("tramite_objeto_solicitud").disabled = false;%>
             <%#*document.getElementById("tramite_observaciones_generales").disabled = false;%>
             <%#*document.getElementById("tramite_documentacion_anexa").disabled = false;%>
             <%#*document.getElementById("tramite_materia_id").disabled = false;%>
             <%#*spinner = document.getElementById("spinner");%>
             <%#*spinner.style.display = "none";%>
             alert("Trámite procedente");
           }
          else

            {
             // Tramite no procedente
             document.getElementById("tramite_noprocedente_id").disabled = false;
             <%#*document.getElementById("tramite_objeto_solicitud").disabled = true;%>
             <%#*document.getElementById("tramite_observaciones_generales").disabled = true;%>
             <%#*document.getElementById("tramite_documentacion_anexa").disabled = true;%>
             <%#*document.getElementById("tramite_materia_id").disabled = true;%>
             <%#*spinner = document.getElementById("spinner");%>
             <%#*spinner.style.display = "none";%>
              alert("Trámite no procedente");
            }


  }
</script>



<!-- ficha -->
<%= render :partial => "ficha"%>
<br /><br />


<div id="scroll">
<!--< form_tag :action => 'update_estatus', :id =>@tramite, :html_options => {:id => "miformulario"} do -%>-->

  <% form_for :tramite, @tramite, :url => { :action => "update_estatus", :id => @tramite }, :html => {:id => "asignacion_materia"} do |f| -%>

<table class="tablakolaval" width="80%" border="0" cellspacing="2" cellpadding="0" style="BORDER-RIGHT: #cccccc 1px solid; BORDER-TOP: #cccccc 1px solid; BORDER-LEFT: #cccccc 1px solid; BORDER-BOTTOM: #cccccc 1px solid">
      <tr>
          <th colspan="3" style="align:center;">
            ¿Es procedente? <%= f.check_box "procedente", :onchange => "alertaChecked();"%>
          </th>
      </tr>

      
      <tr style="background-color:gray; color:white">
          <th colspan="2">
              Motivo por el cual no es procedente:
          </th>
          <th>
            <%= f. collection_select("noprocedente_id", Noprocedente.all, :id, :descripcion, :prompt => '>> Seleccione una opción')%>
          </th>
      </tr>
      

       <tr>
          <th colspan="2" style="background-color:gray; color:white">
              Objeto de la solicitud
          </th>
          <td>
            <%= f.text_field "objeto_solicitud", :size => 95%>
          </td>
      </tr>
      <tr>
          <th colspan="2" style="background-color:gray; color:white">
              Observaciones generales
          </th>
          <td>
            <%= f.text_area "observaciones_generales", :size => "95x6"%>
          </td>
      </tr>

      <tr>
          <th colspan="2" style="background-color:gray; color:white">
              Documentación anexa
          </th>
          <td>
            <%= f.text_area "documentacion_anexa", :size => "95x6"%>
          </td>
      </tr>



     <tr style="background-color:gray; color:white">
          <th colspan="2">
              Materia
          </th>
          <td>
            <%= f. collection_select("materia_id", Materia.all, :id, :descripcion, :prompt => '>> Seleccione una opción', :disabled => true)%>
          </td>
      </tr>

      <tr>
        <th colspan="3">&nbsp;</th>

      </tr>

      <tr>
        <th>
          <th class="boton" style="text-align: center;" colspan="2" style="font-size: 20px;"><%= f.submit "GUARDAR REGISTRO DE ASIGNACIÓN DE MATERIA", :class => "boton"%></th>
        </th>
      </tr>

      <tr>
        <th colspan="3">&nbsp;</th>
      </tr>
  </table>
<% end %>
</div>


<br /><%= link_to image_tag("botones/regresar_menu_ant.png", :border =>0) , :controller => "admin", :action => "index"%><br />


<script type="text/javascript">
  var objeto_solicitud = new LiveValidation( 'tramite_objeto_solicitud' );
  var observaciones = new LiveValidation( 'tramite_observaciones_generales' );
  var documentacion_anexa = new LiveValidation( 'tramite_documentacion_anexa' );
  objeto_solicitud.add( Validate.Length, { maximum: 140 } );
  observaciones.add( Validate.Length, { maximum: 600 } );
  documentacion_anexa.add( Validate.Length, { maximum: 700 } );
</script>